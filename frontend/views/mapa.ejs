<section class="map-section">
    <div class="container-fluid">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
            <h2>Mapa de Ecosistemas Acu√°ticos - Hidalgo</h2>
            <div style="display: flex; align-items: center; gap: 15px;">
                <div id="filtros-ecosistemas" style="display: flex; gap: 10px; align-items: center;">
                    <span style="font-weight: bold; color: #2c3e50;">Filtros:</span>
                    <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                        <input type="checkbox" id="filtro-rio" checked onchange="aplicarFiltros()">
                        <span style="color: #3498db;">üåä R√≠os</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                        <input type="checkbox" id="filtro-lago" checked onchange="aplicarFiltros()">
                        <span style="color: #2ecc71;">üèûÔ∏è Lagos</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                        <input type="checkbox" id="filtro-presa" checked onchange="aplicarFiltros()">
                        <span style="color: #e74c3c;">üèóÔ∏è Presas</span>
                    </label>
                </div>
                <button id="btn-editar-pines" onclick="toggleModoEdicion(); if (modoEdicion) mostrarListaPines();" style="background: #3498db; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">
                    Editar Posiciones
                </button>
            </div>
        </div>
        
        <% if (locals.backendConnected === false) { %>
            <div class="alert alert-warning">
                <p>‚ö†Ô∏è No se pudo conectar con el backend. Algunos datos pueden no estar disponibles.</p>
            </div>
        <% } %>
        
        <div class="mapa-contenedor">
            <div class="map-container" id="map-container">
                <div class="map-wrapper">
                    <img id="mapa-imagen" src="" alt="Mapa del ecosistema" class="map-image" style="display: none;">
                    <div id="pines-container" class="pines-container"></div>
                </div>
                <div class="loading" id="loading">Cargando mapa...</div>
            </div>
            
            <div class="detalles-container" id="detalles-container">
                <div id="detalles-content" class="detalles-content">
                    <!-- Los detalles se cargar√°n aqu√≠ din√°micamente -->
                </div>
            </div>
        </div>
    </div>
</section>

<script src="/js/mapa.js"></script>
